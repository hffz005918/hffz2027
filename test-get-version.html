<!DOCTYPE html>
<html>
<head>
    <title>测试GET版本</title>
</head>
<body>
    <h1>测试GET版本服务器</h1>
    <button onclick="testConnection()">测试连接</button>
    <button onclick="testSave()">测试保存</button>
    <button onclick="testGet()">测试获取</button>
    <div id="result" style="margin:20px; padding:10px; border:1px solid #ccc; background:#f9f9f9;"></div>

    <script src="server-storage-get.js"></script>
    <script>
        const storage = new ServerStorage();
        
        async function testConnection() {
            const result = await storage.testConnection();
            showResult('连接测试', result);
        }
        
        async function testSave() {
            const testData = {
                employeeName: '测试用户',
                type: 'suggestion',
                content: '测试GET版本保存功能 - ' + new Date().toLocaleString(),
                images: []
            };
            
            const result = await storage.saveFeedback(testData);
            showResult('保存测试', result);
        }
        
        async function testGet() {
            try {
                const feedbacks = await storage.getFeedbacks();
                showResult('获取测试', {
                    success: true,
                    count: feedbacks.length,
                    data: feedbacks
                });
            } catch (error) {
                showResult('获取测试', {
                    success: false,
                    error: error.message
                });
            }
        }
        
        function showResult(title, result) {
            const div = document.getElementById('result');
            div.innerHTML = `<h3>${title}</h3><pre>${JSON.stringify(result, null, 2)}</pre>`;
        }
        
        // 自动测试连接
        setTimeout(testConnection, 1000);
    </script>
</body>
</html>